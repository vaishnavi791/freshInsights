<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FreshInsight - Dashboard</title>
  <link rel="stylesheet" href="preview.css">
  <link rel="stylesheet" href="dashboard.css">
  <link href="https://fonts.googleapis.com/css2?family=Italiana&display=swap" rel="stylesheet">
  
  <!-- Plotly.js for charts -->
  <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
</head>

<body>
  <!-- HEADER -->
  <header class="site-header">
    <div class="top-bar">
      <img src="Logo.png" alt="Brand Logo" class="brand-logo">
      <span class="brand-name">FreshInsight</span>
    </div>

    <div class="icon-container">
      <button class="icon-btn" id="mailIcon">âœ‰ï¸</button>
      <button class="icon-btn" id="githubIcon">ğŸ±</button>
      <button class="icon-btn" id="linkedinIcon">ğŸ”—</button>
    </div>

    <div class="info-btn">
      <button class="nav-btn" onclick="goHome()">Home</button>
      <button class="nav-btn" onclick="goUpload()">Upload</button>
      <button class="nav-btn" onclick="goHistory()">History</button>
      <button class="nav-btn" onclick="goContact()">Contact</button>
    </div>

    <div id="infoBox" class="info-box"></div>
  </header>

  <!-- DASHBOARD CONTENT -->
  <div class="dashboard-container">
    <h1 class="dashboard-title">ğŸ“Š Fruit Analysis Dashboard</h1>

    <!-- FILTERS SIDEBAR -->
    <div class="filters-section">
      <h3>ğŸ” Filters</h3>
      
      <label>
        Fruit Type:
        <select id="fruitFilter" multiple>
          <option value="all" selected>All</option>
        </select>
      </label>

      <label>
        Ripeness:
        <select id="ripenessFilter" multiple>
          <option value="all" selected>All</option>
        </select>
      </label>

      <label>
        Date Range:
        <input type="date" id="dateFrom">
        <input type="date" id="dateTo">
      </label>

      <button class="filter-btn" onclick="applyFilters()">Apply Filters</button>
      <button class="filter-btn" onclick="clearFilters()">Clear Filters</button>
    </div>

    <!-- KEY METRICS -->
    <div class="metrics-section">
      <div class="metric-card">
        <h3>Total Analyses</h3>
        <p id="totalAnalyses" class="metric-value">-</p>
      </div>
      <div class="metric-card">
        <h3>Avg Fruit Conf</h3>
        <p id="avgFruitConf" class="metric-value">-</p>
      </div>
      <div class="metric-card">
        <h3>Avg Ripeness Conf</h3>
        <p id="avgRipenessConf" class="metric-value">-</p>
      </div>
      <div class="metric-card">
        <h3>Most Common Fruit</h3>
        <p id="mostCommonFruit" class="metric-value">-</p>
      </div>
      <div class="metric-card">
        <h3>Avg Temperature</h3>
        <p id="avgTemp" class="metric-value">-</p>
      </div>
      <div class="metric-card">
        <h3>Avg Humidity</h3>
        <p id="avgHumidity" class="metric-value">-</p>
      </div>
    </div>

    <!-- SECTION 1: Environmental Conditions Overview -->
    <div class="section-header">
      <h2>ğŸŒ¡ï¸ğŸ’§ Environmental Conditions</h2>
    </div>

    <div class="charts-section">
      <div class="chart-row">
        <div class="chart-container full-width">
          <div id="tempHumCombinedChart"></div>
        </div>
      </div>

      <div class="chart-row">
        <div class="chart-container">
          <div id="tempDistributionChart"></div>
        </div>
        <div class="chart-container">
          <div id="humDistributionChart"></div>
        </div>
      </div>

      <div class="chart-row">
        <div class="chart-container wide">
          <div id="tempHumCorrelationChart"></div>
        </div>
        <div class="chart-container narrow">
          <div id="envStats" class="stats-panel">
            <h3>Statistics</h3>
            <div class="stat-item">
              <span class="stat-label">Min Temp:</span>
              <span id="minTemp" class="stat-value">-</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Max Temp:</span>
              <span id="maxTemp" class="stat-value">-</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Avg Temp:</span>
              <span id="avgTempStat" class="stat-value">-</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Min Humidity:</span>
              <span id="minHum" class="stat-value">-</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Max Humidity:</span>
              <span id="maxHum" class="stat-value">-</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Avg Humidity:</span>
              <span id="avgHumStat" class="stat-value">-</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Correlation:</span>
              <span id="correlation" class="stat-value">-</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Environmental Conditions by Category -->
      <div class="chart-row">
        <div class="chart-container">
          <div id="tempByFruitChart"></div>
        </div>
        <div class="chart-container">
          <div id="tempByRipenessChart"></div>
        </div>
      </div>

      <div class="chart-row">
        <div class="chart-container">
          <div id="humByFruitChart"></div>
        </div>
        <div class="chart-container">
          <div id="humByRipenessChart"></div>
        </div>
      </div>

      <!-- Heatmaps -->
      <div class="chart-row">
        <div class="chart-container">
          <div id="tempHeatmapChart"></div>
        </div>
        <div class="chart-container">
          <div id="humHeatmapChart"></div>
        </div>
      </div>

      <!-- Environmental Quality Gauges -->
      <div class="chart-row">
        <div class="chart-container">
          <div id="tempGaugeChart"></div>
        </div>
        <div class="chart-container">
          <div id="humGaugeChart"></div>
        </div>
        <div class="chart-container">
          <div id="qualityGuidelines" class="quality-panel">
            <h3>Quality Guidelines</h3>
            <div class="guideline-section">
              <h4>Ideal Temperature:</h4>
              <p>ğŸŸ¢ 20-25Â°C: Optimal</p>
              <p>ğŸŸ¡ 15-20Â°C or 25-30Â°C: Good</p>
              <p>ğŸ”´ &lt;15Â°C or &gt;30Â°C: Suboptimal</p>
            </div>
            <div class="guideline-section">
              <h4>Ideal Humidity:</h4>
              <p>ğŸŸ¢ 50-70%: Optimal</p>
              <p>ğŸŸ¡ 40-50% or 70-80%: Good</p>
              <p>ğŸ”´ &lt;40% or &gt;80%: Suboptimal</p>
            </div>
            <div id="currentStatus" class="status-message">
              <!-- Dynamically filled -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- SECTION 2: Automated Insights -->
    <div class="section-header">
      <h2>ğŸ§  Automated Insights</h2>
    </div>
    <div id="insightsContainer" class="insights-section">
      <!-- Dynamically populated -->
    </div>

    <!-- SECTION 3: Confidence vs Ripeness -->
    <div class="section-header">
      <h2>ğŸ¯ Confidence vs Ripeness</h2>
    </div>
    <div class="charts-section">
      <div class="chart-row">
        <div class="chart-container full-width">
          <div id="confidenceScatterChart"></div>
        </div>
      </div>
    </div>

    <!-- SECTION 4: Source Distribution -->
    <div class="section-header">
      <h2>ğŸ“· Source Distribution</h2>
    </div>
    <div class="charts-section">
      <div class="chart-row">
        <div class="chart-container centered">
          <div id="sourceDistributionChart"></div>
        </div>
      </div>
    </div>

    <!-- SECTION 5: Distribution Analysis -->
    <div class="section-header">
      <h2>ğŸ Distribution Analysis</h2>
    </div>
    <div class="charts-section">
      <div class="chart-row">
        <div class="chart-container">
          <div id="fruitDistributionChart"></div>
        </div>
        <div class="chart-container">
          <div id="ripenessDistributionChart"></div>
        </div>
      </div>
    </div>

    <!-- SECTION 6: Combined Analysis -->
    <div class="section-header">
      <h2>ğŸ”€ Combined Analysis</h2>
    </div>
    <div class="charts-section">
      <div class="chart-row">
        <div class="chart-container">
          <div id="stackedBarChart"></div>
        </div>
        <div class="chart-container">
          <div id="groupedBarChart"></div>
        </div>
      </div>
    </div>

    <!-- SECTION 7: Confidence Score Analysis -->
    <div class="section-header">
      <h2>ğŸ“Š Confidence Score Analysis</h2>
    </div>
    <div class="charts-section">
      <div class="chart-row">
        <div class="chart-container">
          <div id="fruitConfBoxChart"></div>
        </div>
        <div class="chart-container">
          <div id="ripenessConfBoxChart"></div>
        </div>
      </div>
    </div>

    <!-- DOWNLOAD SECTION -->
    <div class="download-section">
      <button class="action-btn" onclick="downloadCSV()">ğŸ“¥ Download Data as CSV</button>
      <button class="action-btn" onclick="refreshDashboard()">ğŸ”„ Refresh Dashboard</button>
    </div>
  </div>

  <!-- LOADING OVERLAY -->
  <div id="loadingOverlay" class="loading-overlay">
    <div class="spinner"></div>
    <p>Loading dashboard data...</p>
  </div>

  <script>
// Navigation functions only
function goHome() { window.location.href = 'index.html'; }
function goUpload() { window.location.href = 'preview.html'; }
function goHistory() { window.location.href = 'history.html'; }
function goContact() { window.location.href = 'index.html#contact'; }

// Icon handlers
document.addEventListener('DOMContentLoaded', function() {
  const mailIcon = document.getElementById('mailIcon');
  const githubIcon = document.getElementById('githubIcon');
  const linkedinIcon = document.getElementById('linkedinIcon');
  const infoBox = document.getElementById('infoBox');

  if (mailIcon) {
    mailIcon.addEventListener('click', () => {
      infoBox.style.display = 'block';
      infoBox.innerHTML = 'âœ‰ï¸ freshInsight9@gmail.com';
    });
  }

  if (githubIcon) {
    githubIcon.addEventListener('click', () => {
      infoBox.style.display = 'block';
      infoBox.innerHTML = '<a href="https://github.com/vaishnavi791/freshInsights" target="_blank">ğŸ± GitHub</a>';
    });
  }
});
</script>
  <script src="dashboard.js"></script>
</body>
</html>
